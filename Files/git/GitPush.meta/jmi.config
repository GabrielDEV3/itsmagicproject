{"autoCompleteData":{"varMap":{"Console":{"clsName":"Console","name":"Console"},"this":{"clsName":"GitPush","name":"this"},"url + owner + \"/\" + repo + \"/contents/\" + file":{"clsName":"File","name":"url + owner + \"/\" + repo + \"/contents/\" + file"}}},"compiledCode":["package JAVARuntime;","","import org.json.*; //[IDENTIFIER-START]LINE-NUMBER\u003d0;[IDENTIFIER-END]","import java.util.*;","import java.util.concurrent.*;","import java.util.concurrent.atomic.*;","import java.util.concurrent.locks.*;","import java.util.function.*;","import java.util.regex.*;","import java.util.stream.*;","import java.util.zip.*;","import java.text.*;","import java.net.*;","import java.math.*;","import java.io.*;","import java.nio.*;","import java.time.*;","import java.time.chrono.*;","import java.time.format.*;","import java.time.temporal.*;","import java.time.zone.*;","","","","//[IDENTIFIER-START]LINE-NUMBER\u003d1;[IDENTIFIER-END]","public class GitPush { //[IDENTIFIER-START]LINE-NUMBER\u003d2;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d3;[IDENTIFIER-END]","public static String context; //[IDENTIFIER-START]LINE-NUMBER\u003d4;[IDENTIFIER-END]","public static final String url \u003d \"https://api.github.com/repos/\"; //[IDENTIFIER-START]LINE-NUMBER\u003d5;[IDENTIFIER-END]","private static final String extension \u003d \".git\"; //[IDENTIFIER-START]LINE-NUMBER\u003d6;[IDENTIFIER-END]","private String path; //[IDENTIFIER-START]LINE-NUMBER\u003d7;[IDENTIFIER-END]","private File file; //[IDENTIFIER-START]LINE-NUMBER\u003d8;[IDENTIFIER-END]","private String owner; //[IDENTIFIER-START]LINE-NUMBER\u003d9;[IDENTIFIER-END]","private String repo; //[IDENTIFIER-START]LINE-NUMBER\u003d10;[IDENTIFIER-END]","private String token; //[IDENTIFIER-START]LINE-NUMBER\u003d11;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d12;[IDENTIFIER-END]","public GitPush(String path, String owner, String repo, String token) { //[IDENTIFIER-START]LINE-NUMBER\u003d13;[IDENTIFIER-END]","this.path \u003d path; //[IDENTIFIER-START]LINE-NUMBER\u003d14;[IDENTIFIER-END]","this.file \u003d new File(context, path); //[IDENTIFIER-START]LINE-NUMBER\u003d15;[IDENTIFIER-END]","this.owner \u003d owner; //[IDENTIFIER-START]LINE-NUMBER\u003d16;[IDENTIFIER-END]","this.repo \u003d repo; //[IDENTIFIER-START]LINE-NUMBER\u003d17;[IDENTIFIER-END]","this.token \u003d token; //[IDENTIFIER-START]LINE-NUMBER\u003d18;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d19;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d20;[IDENTIFIER-END]","private String encodeFileToBase64() throws IOException { //[IDENTIFIER-START]LINE-NUMBER\u003d21;[IDENTIFIER-END]","FileInputStream fis \u003d null; //[IDENTIFIER-START]LINE-NUMBER\u003d22;[IDENTIFIER-END]","ByteArrayOutputStream baos \u003d null; //[IDENTIFIER-START]LINE-NUMBER\u003d23;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d24;[IDENTIFIER-END]","try { //[IDENTIFIER-START]LINE-NUMBER\u003d25;[IDENTIFIER-END]","fis \u003d new FileInputStream(file); //[IDENTIFIER-START]LINE-NUMBER\u003d26;[IDENTIFIER-END]","baos \u003d new ByteArrayOutputStream(); //[IDENTIFIER-START]LINE-NUMBER\u003d27;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d28;[IDENTIFIER-END]","byte[] buffer \u003d new byte[1024]; //[IDENTIFIER-START]LINE-NUMBER\u003d29;[IDENTIFIER-END]","int bytesRead; //[IDENTIFIER-START]LINE-NUMBER\u003d30;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d31;[IDENTIFIER-END]","while ((bytesRead \u003d fis.read(buffer)) !\u003d -1) { //[IDENTIFIER-START]LINE-NUMBER\u003d32;[IDENTIFIER-END]","baos.write(buffer, 0, bytesRead); //[IDENTIFIER-START]LINE-NUMBER\u003d33;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d34;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d35;[IDENTIFIER-END]","byte[] fileContent \u003d baos.toByteArray(); //[IDENTIFIER-START]LINE-NUMBER\u003d36;[IDENTIFIER-END]","return Base64.getEncoder().encodeToString(fileContent); //[IDENTIFIER-START]LINE-NUMBER\u003d37;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d38;[IDENTIFIER-END]","} finally { //[IDENTIFIER-START]LINE-NUMBER\u003d39;[IDENTIFIER-END]","if (fis !\u003d null) { //[IDENTIFIER-START]LINE-NUMBER\u003d40;[IDENTIFIER-END]","fis.close(); //[IDENTIFIER-START]LINE-NUMBER\u003d41;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d42;[IDENTIFIER-END]","if (baos !\u003d null) { //[IDENTIFIER-START]LINE-NUMBER\u003d43;[IDENTIFIER-END]","baos.close(); //[IDENTIFIER-START]LINE-NUMBER\u003d44;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d45;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d46;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d47;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d48;[IDENTIFIER-END]","public void commit(String commitMessage) { //[IDENTIFIER-START]LINE-NUMBER\u003d49;[IDENTIFIER-END]","HttpURLConnection connection \u003d null; //[IDENTIFIER-START]LINE-NUMBER\u003d50;[IDENTIFIER-END]","OutputStream os \u003d null; //[IDENTIFIER-START]LINE-NUMBER\u003d51;[IDENTIFIER-END]","BufferedReader br \u003d null; //[IDENTIFIER-START]LINE-NUMBER\u003d52;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d53;[IDENTIFIER-END]","try { //[IDENTIFIER-START]LINE-NUMBER\u003d54;[IDENTIFIER-END]","String encodedContent \u003d encodeFileToBase64(); //[IDENTIFIER-START]LINE-NUMBER\u003d55;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d56;[IDENTIFIER-END]","String apiUrl \u003d url + owner + \"/\" + repo + \"/contents/\" + path; //[IDENTIFIER-START]LINE-NUMBER\u003d57;[IDENTIFIER-END]","connection \u003d (HttpURLConnection) new URL(apiUrl).openConnection(); //[IDENTIFIER-START]LINE-NUMBER\u003d58;[IDENTIFIER-END]","connection.setRequestMethod(\"PUT\"); //[IDENTIFIER-START]LINE-NUMBER\u003d59;[IDENTIFIER-END]","connection.setRequestProperty(\"Authorization\", \"Bearer \" + token); //[IDENTIFIER-START]LINE-NUMBER\u003d60;[IDENTIFIER-END]","connection.setRequestProperty(\"Content-Type\", \"application/json\"); //[IDENTIFIER-START]LINE-NUMBER\u003d61;[IDENTIFIER-END]","connection.setDoOutput(true); //[IDENTIFIER-START]LINE-NUMBER\u003d62;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d63;[IDENTIFIER-END]","JSONObject jsonBody \u003d new JSONObject(); //[IDENTIFIER-START]LINE-NUMBER\u003d64;[IDENTIFIER-END]","jsonBody.put(\"message\", commitMessage); //[IDENTIFIER-START]LINE-NUMBER\u003d65;[IDENTIFIER-END]","jsonBody.put(\"content\", encodedContent); //[IDENTIFIER-START]LINE-NUMBER\u003d66;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d67;[IDENTIFIER-END]","os \u003d connection.getOutputStream(); //[IDENTIFIER-START]LINE-NUMBER\u003d68;[IDENTIFIER-END]","os.write(jsonBody.toString().getBytes(\"utf-8\")); //[IDENTIFIER-START]LINE-NUMBER\u003d69;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d70;[IDENTIFIER-END]","br \u003d new BufferedReader(new InputStreamReader(connection.getInputStream(), \"utf-8\")); //[IDENTIFIER-START]LINE-NUMBER\u003d71;[IDENTIFIER-END]","StringBuilder response \u003d new StringBuilder(); //[IDENTIFIER-START]LINE-NUMBER\u003d72;[IDENTIFIER-END]","String responseLine; //[IDENTIFIER-START]LINE-NUMBER\u003d73;[IDENTIFIER-END]","while ((responseLine \u003d br.readLine()) !\u003d null) { //[IDENTIFIER-START]LINE-NUMBER\u003d74;[IDENTIFIER-END]","response.append(responseLine.trim()); //[IDENTIFIER-START]LINE-NUMBER\u003d75;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d76;[IDENTIFIER-END]","Console.log(\"Resposta do GitHub: \" + response.toString()); //[IDENTIFIER-START]LINE-NUMBER\u003d77;[IDENTIFIER-END]","//[IDENTIFIER-START]LINE-NUMBER\u003d78;[IDENTIFIER-END]","} catch (IOException e) { //[IDENTIFIER-START]LINE-NUMBER\u003d79;[IDENTIFIER-END]","Console.log(e); //[IDENTIFIER-START]LINE-NUMBER\u003d80;[IDENTIFIER-END]","} catch (JSONException e) { //[IDENTIFIER-START]LINE-NUMBER\u003d81;[IDENTIFIER-END]","Console.log(e); //[IDENTIFIER-START]LINE-NUMBER\u003d82;[IDENTIFIER-END]","} finally { //[IDENTIFIER-START]LINE-NUMBER\u003d83;[IDENTIFIER-END]","try { //[IDENTIFIER-START]LINE-NUMBER\u003d84;[IDENTIFIER-END]","if (os !\u003d null) os.close(); //[IDENTIFIER-START]LINE-NUMBER\u003d85;[IDENTIFIER-END]","if (br !\u003d null) br.close(); //[IDENTIFIER-START]LINE-NUMBER\u003d86;[IDENTIFIER-END]","if (connection !\u003d null) connection.disconnect(); //[IDENTIFIER-START]LINE-NUMBER\u003d87;[IDENTIFIER-END]","} catch (IOException ex) { //[IDENTIFIER-START]LINE-NUMBER\u003d88;[IDENTIFIER-END]","Console.log(ex); //[IDENTIFIER-START]LINE-NUMBER\u003d89;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d90;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d91;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d92;[IDENTIFIER-END]","} //[IDENTIFIER-START]LINE-NUMBER\u003d93;[IDENTIFIER-END]"],"originalFileName":"GitPush.java","referencedClasses":[],"referencesUpdatedV2":true}